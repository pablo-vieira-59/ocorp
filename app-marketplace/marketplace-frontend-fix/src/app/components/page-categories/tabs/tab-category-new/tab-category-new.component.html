<div *ngIf="isLoading">
    <app-spinner-black></app-spinner-black>
</div>

<div *ngIf="!isLoading">
    <app-form-body [errors]="errors">
        <div class="row">
            <div class="col-12">
                <label class="fs-5">Dados</label>
                <hr>
            </div>
        </div>

        <div class="row mt-2">
            <div class="col">
                <label for="category" class="required">Nome</label>
                <input id="category" [(ngModel)]="data.name" type="text" class="form-control"
                    placeholder="Digite o nome da categoria ..." (change)="ValidateField('category')">
            </div>

            <div class="col-1">
                <label for="color" class="required">Cor</label>
                <input type="color" class="form-control form-control-color" id="color" [(ngModel)]="data.color">
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-6">
                <label class="fs-5">Subcategorias</label>
            </div>

            <div class="col-6 text-end">
                <label>&nbsp;</label>
                <button class="btn btn-success text-light fw-bolder"> <i class="bi bi-plus-lg" (click)="AddSubcategoryField()"></i> </button>
            </div>

            <div class="col-12">
                <hr>
            </div>
        </div>

        <div class="row mt-2" *ngFor="let item of data.subcategories; let i = index">
            <div class="col">
                <label for="subcategory_{{i}}" class="required">Nome</label>
                <input id="subcategory_{{i}}" type="text" [(ngModel)]="item.name" class="form-control" placeholder="Digite o nome da subcategoria ..." (change)="ValidateField('subcategory_'+i)">
            </div>

            <div class="col-1 p-0">
                <label for="color_{{i}}" class="required">Cor</label>
                <input id="color_{{i}}" type="color" class="form-control form-control-color">
            </div>

            <div class="col-1 ps-0 text-end">
                <label class="col-12">&nbsp;</label>
                <button class="btn btn-danger text-light fw-bolder"> <i class="bi bi-dash-lg" (click)="RemoveSubcategoryField(i)"></i> </button>
            </div>
        </div>
    </app-form-body>
    
    <app-form-bottom>
        <button class="btn btn-success text-light" [disabled]="!IsFormValid()" (click)="Submit()">Adicionar</button>
    </app-form-bottom>
</div>