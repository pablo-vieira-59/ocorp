<div class="flex-column">

    <div class="row" style="font-size: 2em;">
        <div class="col">
            <i class="bi bi-building-fill"></i>
            Estabelecimentos
        </div>
        <div class="col p-0 text-end">
            <button type="button" class="btn btn-outline-primary" (click)="Modal_Register()">
                Adicionar <i class="bi bi-plus-lg"></i>
            </button>
        </div>
    </div>

    <!-- SearchFields -->
    <app-searchfield (OnFilter)="LoadTableData()">
        <div class="col-4 mt-2">
            <app-basefield [fieldType]="2" label="Razão Social"
                placeholder="Digite um nome ..."
                [(text_value)]="searchField_name.value">
            </app-basefield>
        </div>

        <div class="col-4 mt-2">
            <app-basefield [fieldType]="2" label="Nome Fantasia"
                placeholder="Digite um nome ..."
                [(text_value)]="searchField_fantasyName.value">
            </app-basefield>
        </div>

        <div class="col-4 mt-2">
            <app-basefield [fieldType]="2" label="Numero de documento"
                placeholder="Digite o cnpj ..."
                [(text_value)]="searchField_document.value"
                [mask]="'00.000.000/0000-00'">
            </app-basefield>
        </div>

        <div class="col-4 mt-2">
            <app-basefield [fieldType]="2" label="Email"
                placeholder="Digite um e-mail ..."
                [(text_value)]="searchField_email.value">
            </app-basefield>
        </div>
    </app-searchfield>

    <!-- Spinner -->
    <div class="row" *ngIf="isLoading">
        <app-spinner-black></app-spinner-black>
    </div>

    <!-- Mensagem de não encontrado -->
    <div class="row text-center bg-white-d py-4 mt-3" *ngIf="establishments.length == 0 && !isLoading">
        <h5>Nenhum resultado encontrado.</h5>
    </div>

    <!-- Tabela -->
    <div class="row mt-3" *ngIf="establishments.length > 0 && !isLoading">
        <table class="table table-striped table-bordered m-0 bg-white tb-custom">

            <thead class="bg-white-dd text-primary">
                <tr>
                    <th class="text-center" style="width: 5%;">#</th>
                    <th class="text-center" style="">Razão Social</th>
                    <th class="text-center" style="">Nome Fantasia</th>
                    <th class="text-center" style="width: 15%;">Email</th>
                    <th class="text-center" style="width: 15%;">CNPJ</th>
                    <th class="text-center" style="width: 10%;">Status</th>
                    <th class="text-center" style="width: 2%;">Ações</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let item of establishments">

                    <td class="text-center">
                        <b>{{item.id}}</b>
                    </td>

                    <td class="text-left tb-overflow-text">
                        {{item.corporateName}}
                    </td>

                    <td class="text-left tb-overflow-text">
                        {{item.fantasyName}}
                    </td>

                    <td class="text-left tb-overflow-text">
                        {{item.email}}
                    </td>

                    <td class="text-left tb-overflow-text">
                        {{item.documentNumber | mask : '00.000.000/0000-00'}}
                    </td>

                    <td class="text-center tb-overflow-text">
                        <span class="badge bg-success"><small>Ativo</small></span>
                    </td>

                    <td class="text-center">
                        <div ngbDropdown placement="bottom-right">
                            <button class="btn-transparent" id="action" ngbDropdownToggle>
                                <i class="bi bi-three-dots-vertical"></i>
                            </button>

                            <div ngbDropdownMenu="action">
                                <button ngbDropdownItem type="button" (click)="Modal_Edit(item.id)">
                                    <i class="bi bi-pencil-square me-2"></i>Editar
                                </button>
                            </div>
                        </div>
                    </td>

                </tr>
            </tbody>
        </table>
    </div>

    <!-- Paginação -->
    <app-pagination [totalItems]="totalItems" (OnPageChange)="ChangePage($event)" (OnMaxItensChange)="ChangePageSize($event)"></app-pagination>
</div>